(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(79),c=n.n(r),l=(n(88),n(40)),i=n(39),s=n(2),u=n(3),d=n(5),m=n(4),f=n(6),h=(n(89),o.a.createContext({notes:[],folders:[],addNote:function(){},addFolder:function(){},deleteNote:function(){},deleteFolder:function(){},updateNote:function(){},updateFolder:function(){}})),p=n(8),v=n(12),b={API_ENDPOINT:"https://immense-waters-78309.herokuapp.com",API_KEY:"c03ec4d8-3cbe-43ff-98f8-f010cb5cb45e"},E=(n(90),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).deleteFolderRequest=function(e,t){fetch("".concat(b.API_ENDPOINT,"/api/folders/").concat(e),{method:"delete",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(a){t(e),n.props.history.push("/")}).catch(function(e){console.error(e)})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("ul",{className:"foldersList"},this.context.folders.map(function(t){return o.a.createElement("li",{key:t.id,style:{listStyle:"none"}},o.a.createElement(p.c,{to:"/folders/".concat(t.id),activeClassName:"active",className:"folder-links"},t.folder_name," "),o.a.createElement("p",null,(n=e.context.notes,a=t.id,n.filter(function(e){return e.folder===a}).length)));var n,a}),o.a.createElement(p.c,{to:"/add-folder"},o.a.createElement("button",null,"+ Add Folder")),this.props.match.params.folderId?o.a.createElement(p.c,{to:"/edit-folder/".concat(this.props.match.params.folderId)},o.a.createElement("button",null,"Edit Folder")):null,o.a.createElement("button",{disabled:!this.props.match.params.folderId,className:"delete-folder-btn",type:"button",onClick:function(){return e.deleteFolderRequest(e.props.match.params.folderId,e.context.deleteFolder)}},"DELETE FOLDER"))}}]),t}(o.a.Component));function N(e){return e.message?o.a.createElement("div",{className:"error"},e.message):o.a.createElement(o.a.Fragment,null)}E.contextType=h,E.defaultProps={onClickDelete:function(){}},E.defaultProps={folders:[],notes:[]};n(95),n(96);var g=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=function(e,t){var n=Number(t),a=e.find(function(e){return e.id===n});return console.log(a),a}(this.context.notes,this.props.match.params.noteId);return o.a.createElement("div",{className:"note-content-wrapper"},o.a.createElement("header",{className:"note-header"},o.a.createElement("h3",{className:"note-title"},e.note_name)),o.a.createElement("p",null,e.content),o.a.createElement("div",{className:"return-btn-container"},o.a.createElement("button",{onClick:this.props.history.goBack,className:"return-btn"},"Go Back")))}}]),t}(o.a.Component);g.contextType=h,g.defaultProps={notes:[]};var j=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=e.target.title.value,a=n.props.match.params.folderId,o={id:parseInt(a),folder_name:t};fetch(b.API_ENDPOINT+"/api/folders/".concat(a),{method:"PATCH",body:JSON.stringify(o),headers:{"content-type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.updateFolder(o),n.props.history.goBack()})},n.validateTitle=function(e){var t=n.state.folder.value.trim();return 0===t.length?"Please enter a title":t.length<3||t.length>20?"Title must be be between 3 and 20 characters long":void 0},n.getFolderTitle=function(e){n.setState({folder:{value:e,touched:!0}})},n.isFormValid=function(){return!!n.state.folder.touched},n.state={folder:{value:"",touched:!1}},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.folderId;fetch("".concat(b.API_ENDPOINT,"/api/folders/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(b.API_KEY),"content-type":"application/json"}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(t){e.setState({folder:{value:t.folder_name}})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this,t=this.state.folder,n=this.isFormValid();return o.a.createElement("div",{className:"edit-folder-container"},o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("label",{htmlFor:"folder name"},"Folder Name:"),o.a.createElement("input",{onChange:function(t){return e.getFolderTitle(t.target.value)},type:"text",id:"title",name:"title",value:t.value}),o.a.createElement("button",{type:"submit",disabled:!n},"Submit")," ",o.a.createElement("div",{className:"return-button-container"},o.a.createElement("button",{onClick:this.props.history.goBack,type:"button",className:"return-button"},"Go Back"))),!this.state.folder.value&&o.a.createElement(N,{message:this.validateTitle()}))}}]),t}(o.a.Component);j.contextType=h;var y=Object(v.e)(j),O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).validateName=function(e){var t=n.state.note_name.value.trim();return 0===t.length?"Please enter a name for the note":t.length<3||t.length>20?"Note name should be between 3 and 20 characters":void 0},n.validateContent=function(e){if(""===n.state.content.value)return"Please enter content"},n.validateFolderId=function(e){if(!1===n.state.folder.chosen)return"Please select a folder"},n.getTitle=function(e){n.setState({note_name:{value:e,touched:!0}})},n.getContent=function(e){n.setState({content:{value:e,filled:!0}})},n.getFolderId=function(e){n.setState({folder:{value:e,chosen:!0}})},n.isFormValid=function(){var e=n.state,t=e.note_name,a=e.content,o=e.folder;return t.value&&a.value&&o.chosen},n.handleSubmit=function(e){e.preventDefault();var t=n.props.match.params.noteId,a={id:parseInt(t),note_name:e.target.note_name.value,folder:parseInt(e.target.folder.value),content:e.target.content.value,modified_date:new Date};fetch("".concat(b.API_ENDPOINT,"/api/notes/").concat(t),{method:"PATCH",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.updateNote(a),n.props.history.goBack()}).catch(function(e){console.error(e)})},n.state={note_name:{value:"",touched:!1},content:{value:"",filled:!1},folder:{value:"",chosen:!1},modified_date:""},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.noteId;fetch("".concat(b.API_ENDPOINT,"/api/notes/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(b.API_KEY),"content-type":"application/json"}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(t){e.setState({note_name:{value:t.note_name},content:{value:t.content}})}).catch(function(t){console.error(t),e.setState({e:t})})}},{key:"render",value:function(){var e=this,t=this.isFormValid(),n=this.state,a=n.note_name,r=n.content;return o.a.createElement("div",{className:"edit-note-container"},o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("div",{className:"edit-name-container"},o.a.createElement("label",{htmlFor:"edit name",className:"edit-note-label"})," Edit Title:",o.a.createElement("input",{type:"text",id:"note_name",name:"note_name",placeholder:"My To Dos",defaultValue:a.value,onChange:function(t){return e.getTitle(t.target.value)}})),this.state.note_name.chosen&&o.a.createElement(N,{message:this.validateName()}),o.a.createElement("div",{className:"add-content-container"},o.a.createElement("label",{className:"add-content-label",htmlFor:"add content"})," Add Content:",o.a.createElement("textarea",{id:"content",name:"content",value:r.value,onChange:function(t){return e.getContent(t.target.value)}}),!r.value&&o.a.createElement(N,{message:this.validateContent()})),o.a.createElement("select",{name:"folder",onChange:function(t){return e.getFolderId(t.target.value)}},o.a.createElement("option",null,"Select Folder"),this.context.folders.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.folder_name)})),!1===this.state.folder.chosen&&o.a.createElement(N,{message:this.validateFolderId()}),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{type:"submit",disabled:!t},"Submit")),o.a.createElement("div",{className:"note-return-button"},o.a.createElement("button",{type:"button",onClick:this.props.history.goBack},"Go Back"))))}}]),t}(o.a.Component);O.contextType=h;var I=Object(v.e)(O),P=n(82);n(199);function k(e){return o.a.createElement(h.Consumer,null,function(t){return o.a.createElement("li",{key:e.note.id,style:{listStyle:"none"},className:"note-item"},o.a.createElement("h2",{className:"note-title"},o.a.createElement(p.c,{to:"/notes/".concat(e.note.id),key:e.note.id},e.note.note_name)),o.a.createElement("p",{className:"date"},"Modified: ",Object(P.format)(e.note.modified_date,"Do MMM YYYY")),o.a.createElement("button",{type:"button",onClick:function(){return n=e.note.id,a=t.deleteNote,void fetch("".concat(b.API_ENDPOINT,"/api/notes/").concat(n),{method:"delete",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(e){a(n)}).catch(function(e){console.error(e)});var n,a}},"DELETE"),o.a.createElement(p.c,{to:"/edit-note/".concat(e.note.id)},o.a.createElement("button",{type:"button"},"EDIT NOTE")))})}k.defaultProps={note:{}};n(200);var F=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=function(e,t){var n=Number(t);return t?e.filter(function(e){return e.folder===n}):e}(this.context.notes,this.props.match.params.folderId);return o.a.createElement("ul",null,e.map(function(e){return o.a.createElement(k,{key:e.note_name,note:e})}),o.a.createElement("div",{className:"add-note-wrapper"},o.a.createElement(p.c,{to:"/add-note"},o.a.createElement("button",{className:"add-note-btn"},"+ Add Note"))))}}]),t}(o.a.Component);F.contextType=h,F.defaultProps={notes:[]};var T=Object(v.e)(F),S=(n(201),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).validateTitle=function(e){var t=n.state.folder.value.trim();return 0===t.length?"Please enter a title":t.length<3||t.length>20?"Title must be be between 3 and 20 characters long":void 0},n.getFolderTitle=function(e){n.setState({folder:{value:e,touched:!0}})},n.handleSubmit=function(e){e.preventDefault();var t={folder_name:e.target.title.value};fetch("".concat(b.API_ENDPOINT,"/api/folders"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){n.context.addFolder(e),n.setState({folder:{value:"",touched:!1}}),n.props.history.goBack()})},n.state={folder:{value:"",touched:!1}},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"add-folder-container"},o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("label",{htmlFor:"folder name"},"Folder Name:"),o.a.createElement("input",{onChange:function(t){return e.getFolderTitle(t.target.value)},type:"text",id:"title",name:"title",defaultValue:"Untitled Folder"}),o.a.createElement("button",{type:"submit",disabled:this.validateTitle()},"Submit")," ",o.a.createElement("div",{className:"return-button-container"},o.a.createElement("button",{onClick:this.props.history.goBack,type:"button",className:"return-button"},"Go Back"))),this.state.folder.touched&&o.a.createElement(N,{message:this.validateTitle()}))}}]),t}(o.a.Component));S.contextType=h;var _=Object(v.e)(S),C=(n(202),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).validateName=function(e){var t=n.state.name.value.trim();return 0===t.length?"Please enter a name for the note":t.length<3||t.length>20?"Note name should be between 3 and 20 characters":void 0},n.validateContent=function(e){if(0===n.state.content.value.length)return"Please enter content"},n.validateFolderId=function(e){if(null===n.state.folderId.value)return"Please select a folder"},n.getTitle=function(e){n.setState({name:{value:e,touched:!0}})},n.getContent=function(e){n.setState({content:{value:e,filled:!0}})},n.getFolderId=function(e){n.setState({folderId:{value:e,chosen:!0}})},n.isFormValid=function(){var e=n.state,t=e.name,a=e.content,o=e.folderId;return t.value&&a.value&&o.value},n.handleSubmit=function(e){e.preventDefault();var t={note_name:e.target.name.value,folder:e.target.folderId.value,content:e.target.content.value};fetch("".concat(b.API_ENDPOINT,"/api/notes"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}}).then(function(e){if(!e.ok)throw new Error("Oops... Something went wrong");return e.json()}).then(function(e){n.context.addNote(e),n.props.history.goBack()}).catch(function(e){console.error(e)})},n.state={name:{value:"",touched:!1},content:{value:"",filled:!1},folderId:{value:"",chosen:!1},modified:new Date},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.isFormValid();return o.a.createElement("div",{className:"add-note-container"},o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("div",{className:"add-name-container"},o.a.createElement("label",{htmlFor:"add name",className:"add-note-label"})," Add Title:",o.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"My To Dos",onChange:function(t){return e.getTitle(t.target.value)}})),this.state.name.touched&&o.a.createElement(N,{message:this.validateName()}),o.a.createElement("div",{className:"add-content-container"},o.a.createElement("label",{className:"add-content-label",htmlFor:"add content"})," Add Content:",o.a.createElement("textarea",{id:"content",name:"content",placeholder:"...buy groceries",onChange:function(t){return e.getContent(t.target.value)}}),!this.state.content.value&&o.a.createElement(N,{message:this.validateContent()})),o.a.createElement("select",{name:"folderId",onChange:function(t){return e.getFolderId(t.target.value)}},o.a.createElement("option",{value:""},"Select Folder"),this.context.folders.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.folder_name)})),!this.state.folderId.chosen&&o.a.createElement(N,{message:this.validateFolderId()}),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{type:"submit",disabled:!t},"Submit")),o.a.createElement("div",{className:"note-return-button"},o.a.createElement("button",{type:"button",onClick:this.props.history.goBack},"Go Back"))))}}]),t}(o.a.Component));C.contextType=h;var A=Object(v.e)(C),x=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={hasError:!1},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.hasError?o.a.createElement("h2",null," Could not display"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(o.a.Component),D=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).setNote=function(e){n.setState({note:e,error:null})},n.setFolder=function(e){n.setState({folder:e,error:null})},n.addFolder=function(e){n.setState({folders:[].concat(Object(i.a)(n.state.folders),[e])})},n.addNote=function(e){n.setState({notes:[].concat(Object(i.a)(n.state.notes),[e])})},n.deleteNote=function(e){n.setState({notes:n.state.notes.filter(function(t){return t.id!==parseInt(e)})})},n.deleteFolder=function(e){n.setState({folders:n.state.folders.filter(function(t){return t.id!==parseInt(e)}),notes:n.state.notes.filter(function(t){return t.folder!==parseInt(e)})})},n.updateNote=function(e){n.setState({notes:n.state.notes.map(function(t){return t.id!==e.id?t:e})})},n.updateFolder=function(e){n.setState({folders:n.state.folders.map(function(t){return t.id!==e.id?t:e})})},n.state={notes:[],folders:[],error:null},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(b.API_ENDPOINT,"/api/folders"),{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}}),fetch("".concat(b.API_ENDPOINT,"/api/notes"),{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(b.API_KEY)}})]).then(function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then(function(e){return Promise.reject(e)}):n.json().then(function(e){return Promise.reject(e)})}).then(function(t){var n=Object(l.a)(t,2),a=n[0],o=n[1];e.setState({folders:a}),e.setState({notes:o})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,addFolder:this.addFolder,addNote:this.addNote,deleteNote:this.deleteNote,deleteFolder:this.deleteFolder,updateFolder:this.updateFolder,updateNote:this.updateNote};return o.a.createElement("div",{className:"App"},o.a.createElement("header",null,o.a.createElement("h1",{className:"app-header"},o.a.createElement(p.b,{to:"/"},"Noteful"))),o.a.createElement(h.Provider,{value:e},o.a.createElement("div",{className:"sidebar flex"},o.a.createElement(x,null,o.a.createElement(v.a,{exact:!0,path:"/",component:E}),o.a.createElement(v.a,{exact:!0,path:"/folders/:folderId",component:E}))),o.a.createElement("main",null,o.a.createElement(x,null,o.a.createElement(v.a,{exact:!0,path:"/",component:T}),o.a.createElement(v.a,{exact:!0,path:"/folders/:folderId",component:T}))),o.a.createElement(x,null,o.a.createElement(v.a,{exact:!0,path:"/notes/:noteId",component:g})),o.a.createElement(x,null,o.a.createElement(v.a,{exact:!0,path:"/add-folder",component:_}),o.a.createElement(v.a,{exact:!0,path:"/edit-folder/:folderId",component:y}),o.a.createElement(v.a,{exact:!0,path:"/edit-note/:noteId",component:I}),o.a.createElement(v.a,{exact:!0,path:"/add-note",component:A}))))}}]),t}(o.a.Component);D.contextType=h;var w=Object(v.e)(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(p.a,null,o.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},83:function(e,t,n){e.exports=n(203)},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.8af538d8.chunk.js.map